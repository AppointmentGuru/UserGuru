webpackJsonp([1],{144:function(e,t){},145:function(e,t){},146:function(e,t){},148:function(e,t,s){var r=s(20)(s(86),s(153),null,null);e.exports=r.exports},149:function(e,t,s){s(145);var r=s(20)(s(87),s(151),"data-v-3ad71a65",null);e.exports=r.exports},150:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"grey lighten-4"},[s("v-card-text",[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs11:""}},[s("v-text-field",{attrs:{name:"id-phonenumber",label:"Phone number",hint:"Make sure to add the country code. e.g.: +27831234567"},on:{input:e.checkPhoneLength},model:{value:e.user.phoneNumber,callback:function(t){e.user.phoneNumber=t},expression:"user.phoneNumber"}})],1),e._v(" "),s("v-col",{attrs:{xs1:""}},[s("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.identifyRequest.loading,expression:"identifyRequest.loading"}],staticClass:"primary--text",staticStyle:{"margin-top":"30px"},attrs:{indeterminate:"",width:3,size:15}})],1)],1)],1),e._v(" "),s("transition-group",{attrs:{name:"fade"}},["token-auth"===e.nextStep?s("v-container",{key:"token-auth",attrs:{fluid:""}},[s("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.loginRequest),expression:"requestIsLoading(loginRequest)"}],staticClass:"primary--text pull-right",attrs:{indeterminate:""}}),e._v(" "),s("h5",[e._v(e._s(e.loginHeader))]),e._v(" "),s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs12:""}},[s("v-text-field",{attrs:{type:"password",name:"token-password",label:"Password"},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1)],1)],1):e._e()],1),e._v(" "),s("transition-group",{attrs:{name:"fade"}},["auth-register"===e.nextStep?s("v-container",{key:"auth-register",attrs:{fluid:""}},[s("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.requestIsLoading(e.registerRequest),expression:"requestIsLoading(registerRequest)"}],staticClass:"primary--text pull-right",attrs:{indeterminate:""}}),e._v(" "),s("h5",[e._v(e._s(e.createAccountHeader))]),e._v(" "),s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs12:""}},[s("v-text-field",{attrs:{name:"reg-fullName",label:"full name",hint:"Your first and last names please"},model:{value:e.user.fullName,callback:function(t){e.user.fullName=t},expression:"user.fullName"}})],1)],1),s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs12:""}},[s("v-text-field",{attrs:{name:"reg-email",label:"e-mail address"},model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}})],1)],1),s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs12:""}},[s("v-text-field",{attrs:{name:"reg-phone",label:"pick a password",min:"8",hint:"You can make your password stronger by including numbers(1234) and special characters(!@#$)",type:"password",rules:e.rules.password},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1)],1)],1):e._e()],1),e._v(" "),s("transition-group",{attrs:{name:"fade"}},[s("v-container",{directives:[{name:"show",rawName:"v-show",value:"auth-otp"===e.nextStep||!0===e.showOTP,expression:'nextStep === "auth-otp" || showOTP === true'}],key:"auth-otp",attrs:{fluid:""}},[s("h5",[e._v(e._s(e.otpHeader))]),e._v(" "),s("v-row",{attrs:{row:""}},[s("v-col",{attrs:{xs12:""}},[s("v-text-field",{attrs:{name:"otp",label:"OTP",hint:"We sent a one-time pin to the number you entered above. Please check SMSes on your phone and enter that code above"},on:{input:e.checkOTPLength},model:{value:e.user.otp,callback:function(t){e.user.otp=t},expression:"user.otp"}})],1)],1)],1)],1)],1),e._v(" "),s("v-card-row",{attrs:{actions:""}},[s("v-btn",{attrs:{primary:""},nativeOn:{click:function(t){t.stopPropagation(),e.login(t)}}},[e._v("Next")])],1)],1)},staticRenderFns:[]}},151:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-container"},[e.user?s("v-card",{staticClass:"grey lighten-4 "},[s("v-card-row",{attrs:{height:"0px"}},[s("div",{staticStyle:{"text-align":"center"}},[s("v-avatar",{staticStyle:{"padding-left":"40px"}},[e.user.profile.profile_picture?s("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e.user.profile.profile_picture}}):s("img",{staticStyle:{width:"150px",height:"150px",border:"solid 1px"},attrs:{src:"http://rebuildingshatteredlives.org/inc/img/defaultavatar.jpg"}})])],1)]),e._v(" "),s("v-list",{attrs:{"two-line":""}},[s("v-list-item",[s("v-list-tile",[s("v-list-tile-content",[s("v-list-tile-title",[s("h5",{staticStyle:{"padding-left":"200px"}},[e._v(e._s(e.user.first_name)+" "+e._s(e.user.last_name))])])],1)],1)],1),e._v(" "),s("v-divider"),e._v(" "),s("v-list-item",[s("v-list-tile",[s("v-list-tile-action",[s("v-icon",{staticClass:"indigo--text"},[e._v("phone")])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e.editmode?s("v-text-field",{attrs:{name:"user-phone",label:"phone number",hint:"Make sure to keep the country code. e.g.: +27831234567"},model:{value:e.user.phone_number,callback:function(t){e.user.phone_number=t},expression:"user.phone_number"}}):s("span",[e._v("\n            "+e._s(e.user.phone_number)+"\n            ")])],1),e._v(" "),s("v-list-tile-sub-title",[e._v("Mobile")])],1),e._v(" "),s("v-list-tile-action",[s("v-icon",[e._v("chat")])],1)],1)],1),e._v(" "),s("v-divider",{attrs:{inset:""}}),e._v(" "),s("v-list-item",[s("v-list-tile",[s("v-list-tile-action",[s("v-icon",{staticClass:"indigo--text"},[e._v("mail")])],1),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",[e.editmode?e._e():s("span",[e._v("\n            "+e._s(e.user.email)+"\n            ")]),e._v(" "),e.editmode?s("v-text-field",{attrs:{name:"user-email",label:"email address"},model:{value:e.user.email,callback:function(t){e.user.email=t},expression:"user.email"}}):e._e()],1),e._v(" "),s("v-list-tile-sub-title",[e._v("E-mail")])],1),e._v(" "),s("v-list-tile-action",[s("v-icon",[e._v("send")])],1)],1)],1)],1),e._v(" "),s("v-card-row",{attrs:{actions:""}},[e.editmode?e._e():s("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){t.stopPropagation(),e.editmode=!0}}},[s("v-icon",{attrs:{small:""}},[e._v("edit")]),e._v("\n      Edit details")],1),e._v(" "),e.editmode?s("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){t.stopPropagation(),e.editmode=!1}}},[e._v("\n      Cancel")]):e._e(),e._v(" "),e.editmode?s("v-btn",{attrs:{primary:""},nativeOn:{click:function(t){t.stopPropagation(),e.editmode=!1}}},[e._v("\n      Save")]):e._e()],1)],1):e._e()],1)},staticRenderFns:[]}},152:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"elevation-2",attrs:{id:"app"}},[s("who-am-i",{directives:[{name:"show",rawName:"v-show",value:-1===e.meRequest,expression:"meRequest === -1"}],staticClass:"page",on:{"whoami:loggedin":e.loggedin}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:-1!==e.meRequest,expression:"meRequest !== -1"}],staticClass:"page"},[s("center",[s("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.meRequest.loading,expression:"meRequest.loading"}],staticClass:"primary--text",staticStyle:{"margin-top":"30px"},attrs:{indeterminate:"",width:3,size:15}})],1),e._v(" "),s("v-list",{attrs:{"two-line":""}},[s("v-subheader",[e._v("User profile")])],1),e._v(" "),s("user-profile",{attrs:{user:e.user}}),e._v(" "),s("v-list",{attrs:{"two-line":""}},[s("v-subheader",[e._v("User list item")]),e._v(" "),s("user-list-item",{attrs:{user:e.user}}),e._v(" "),s("v-divider",{attrs:{inset:""}})],1),e._v(" "),s("pre",[e._v(e._s(e.user))])],1),e._v(" "),s("br")],1)},staticRenderFns:[]}},153:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-list-item",{key:e.user.id,on:{click:function(t){e.$emit("userlistitem:clicked",e.user)}}},[e.user.profile?s("v-list-tile",{attrs:{avatar:""}},[s("v-list-tile-avatar",[s("img",{attrs:{src:e.user.profile.profile_picture}})]),e._v(" "),s("v-list-tile-content",[s("v-list-tile-title",{domProps:{innerHTML:e._s(e.userTitle(e.user))}}),e._v(" "),s("v-list-tile-sub-title",{domProps:{innerHTML:e._s(e.userSubTitle(e.user))}})],1),e._v(" "),s("v-list-tile-action",[s("v-btn",{attrs:{icon:"",ripple:""}},[s("v-icon",{staticClass:"grey--text text--darken-2"},[e._v(e._s(e.icon))])],1)],1)],1):e._e()],1)},staticRenderFns:[]}},59:function(e,t,s){s(144);var r=s(20)(s(88),s(150),"data-v-27454b48",null);e.exports=r.exports},60:function(e,t,s){"use strict";var r=s(14),i=s(154),a=s(59),n=s.n(a);r.a.use(i.a),t.a=new i.a({routes:[{path:"/",name:"WhoAmI",component:n.a}]})},63:function(e,t){},64:function(e,t,s){s(146);var r=s(20)(s(85),s(152),null,null);e.exports=r.exports},84:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(14),i=s(64),a=s.n(i),n=s(65),o=s.n(n),u=s(60),l=s(62),d=s(61),c=s(63),p=(s.n(c),[{name:"appointmentguru",class:d.a}]);r.a.config.productionTip=!1,r.a.use(l.a,p),r.a.use(o.a),new r.a({el:"#app",router:u.a,template:"<App/>",components:{App:a.a}})},85:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(40),i=s(149),a=s.n(i),n=s(148),o=s.n(n),u=s(59),l=s.n(u);t.default={name:"app",mixins:[r.a],components:{UserProfile:a.a,WhoAmI:l.a,UserListItem:o.a},data:function(){return{isLoggedIn:!1,token:""}},computed:{meRequest:function(){return this.$requeststore.getters.getRequestById("me-request")},user:function(){return-1!==this.meRequest&&200===this.meRequest.status?this.meRequest.result.data.results[0]:null}},methods:{loggedin:function(e){this.isLoggedIn=!0,this.getMe()},getMe:function(){this.loggedin=!0,this.$appointmentguru.resource("practitioner.me").id("me-request").list()}}}},86:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"UserListItem",props:{user:{type:Object,default:function(){return{}}},icon:{type:String,default:"keyboard_arrow_right"}},methods:{userTitle:function(e){var t=e.profile.practice_name;return t||(t=e.first_name+" "+e.last_name),t},userSubTitle:function(e){var t=e.first_name+" "+e.last_name,s="",r="";return e.profile&&(e.profile.practice_name||(t=""),e.profile.profession&&(r=e.profile.profession.name),e.profile.services&&e.profile.services.length>0&&(s=e.profile.services[0].address.address)),t+". "+r+".<br/> "+s}}}},87:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"UserProfile",props:{user:{type:Object,default:function(){return{}}}},data:function(){return{editmode:!1,phoneNumberActions:["Call","Message"]}}}},88:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(40);t.default={name:"hello",mixins:[r.a],props:{initialData:{type:Object,default:function(){return{}}},otpHeader:{type:String,default:"Please enter your OTP"},createPasswordHeader:{type:String,default:"Please choose a password"},createAccountHeader:{type:String,default:"Tell us a little about yourself"},loginHeader:{type:String,default:"Please login"}},data:function(){var e=this;return{showOTP:!1,showSetPassword:!1,user:{phoneNumber:"+27",password:""},rules:{password:[function(){return!(e.user.password.length<8)||"Password should be at least 8 characters"}]}}},watch:{identifyRequest:function(){console.log("id request changed")},loginRequestStatus:function(){if(200===this.loginRequestStatus){var e=this.loginRequest.result.data.token;console.log(e),this.setToken(e),this.$emit("whoami:loggedin",e)}},validateOtpRequestStatus:function(){if(200===this.validateOtpRequestStatus){var e=this.validateOtpRequest.result.data.token;this.setToken(e),this.showSetPassword=!0}},setPasswordRequestStatus:function(){200===this.setPasswordRequestStatus&&this.$emit("whoami:loggedin")},registerRequestStatus:function(){if(200===this.registerRequestStatus){var e=this.registerRequest.result.data.token;this.setToken(e),this.$emit("whoami:registered",e)}}},computed:{requests:function(){this.$requeststore.requests.requests},identifyRequest:function(){return this.$requeststore.getters.getRequestById("auth-identify-request")},loginRequest:function(){return this.$requeststore.getters.getRequestById("auth-login-request")},loginRequestStatus:function(){var e=this.loginRequest;return-1===e?0:e.status},validateOtpRequest:function(){return this.$requeststore.getters.getRequestById("auth-validate-otp")},validateOtpRequestStatus:function(){var e=this.validateOtpRequest;return-1===e?0:e.status},setPasswordRequest:function(){return this.$requeststore.getters.getRequestById("auth-set-password")},setPasswordRequestStatus:function(){var e=this.setPasswordRequest;return-1===e?0:e.status},registerRequest:function(){return this.$requeststore.getters.getRequestById("auth-register")},registerRequestStatus:function(){var e=this.registerRequest;return-1===e?0:e.status},nextStep:function(){return-1!==this.identifyRequest&&this.identifyRequest.result&&this.identifyRequest.result.data?this.identifyRequest.result.data.type:null}},methods:{getId:function(){var e={id:"auth-identify-request",params:{phone_number:this.user.phoneNumber}};this.$appointmentguru.endpoint("auth-identify",e)},checkPhoneLength:function(){12===this.user.phoneNumber.length&&this.getId()},checkOTPLength:function(){4===this.user.otp.length&&this.validateOTP()},login:function(){var e={id:"auth-login-request",data:{phone_number:this.user.phoneNumber,password:this.user.password}};this.$appointmentguru.endpoint("auth-login-phone",e)},validateOTP:function(){var e={id:"auth-validate-otp",data:{phone_number:this.user.phoneNumber,otp:this.user.otp}};this.$appointmentguru.endpoint("auth-validate-otp",e)},setToken:function(e){var t=[this.$appointmentguru.name,"Authorization","token "+e];this.$requeststore.commit("BACKEND_CONFIG_SET_HEADER",t)},performRegistration:function(){var e={id:"auth-register",data:{phone_number:this.user.phoneNumber,password1:this.user.password,password2:this.user.password,full_name:this.user.fullName,email:this.user.email,is_practitioner:!0}};this.$appointmentguru.endpoint("auth-register",e)},setPassword:function(){var e={id:"auth-set-password",data:{password:this.user.password}};this.$appointmentguru.endpoint("auth-set-password",e)}}}}},[84]);
//# sourceMappingURL=app.aceb5c8b294f4de13cad.js.map